<!DOCTYPE html>
<html lang="">

<body>


<button onclick="getLocation()">Click here to send your coordinates</button>
<p id="location"></p>

<script>
    var user_location = document.getElementById("location");

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            user_location.innerHTML = "Geolocation is not supported by this browser.";
        }
    }

    function showPosition(position) {
        user_location.innerHTML= "Latitude: " + position.coords.latitude +
            " Longitude: " + position.coords.longitude;
        let markup = user_location.innerHTML
        let location_data = {
            latitude : position.coords.latitude,
            longitude : position.coords.longitude
        }
        let url = window.location.href
        console.log(markup)
         let req = fetch(url + '/location',{
            method: 'post',
            body: JSON.stringify({location : location_data})
        }).then(response => response.json())
            .then(data => console.log(data));
        window.close()
            
    }
</script>
</body>
</html>